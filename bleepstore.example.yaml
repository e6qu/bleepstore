# BleepStore Configuration Example
#
# Copy this file to bleepstore.yaml and modify as needed.
# All implementations (Python, Go, Rust, Zig) use this same format.

server:
  host: "0.0.0.0"
  port: 9000
  region: "us-east-1"
  # admin_port: 9001         # Separate port for admin API (optional)
  # admin_token: "secret"    # Bearer token for admin API access

auth:
  # Default credentials for development. Change in production!
  access_key: "bleepstore"
  secret_key: "bleepstore-secret"

metadata:
  engine: "sqlite"             # "sqlite" (embedded mode) or "raft" (cluster mode)
  sqlite:
    path: "./data/metadata.db"

storage:
  backend: "local"             # "local", "memory", "sqlite", "aws", "gcp", "azure"

  local:
    root_dir: "./data/objects"

  # memory:
  #   max_size_bytes: 0                # 0 = unlimited
  #   persistence: "none"              # "none" | "snapshot"
  #   snapshot_path: "./data/memory.snap"
  #   snapshot_interval_seconds: 300   # 0 = snapshot only on shutdown

  # sqlite: no config needed â€” uses metadata.sqlite.path (same database)

  # aws:
  #   bucket: "my-backing-bucket"
  #   region: "us-east-1"
  #   prefix: "bleepstore/"
  #   endpoint_url: ""                 # custom S3-compatible endpoint (e.g. MinIO)
  #   use_path_style: false
  #   access_key_id: ""                # falls back to AWS_ACCESS_KEY_ID env
  #   secret_access_key: ""            # falls back to AWS_SECRET_ACCESS_KEY env

  # gcp:
  #   bucket: "my-backing-bucket"
  #   project: "my-project"
  #   prefix: "bleepstore/"
  #   credentials_file: ""             # falls back to GOOGLE_APPLICATION_CREDENTIALS env

  # azure:
  #   container: "my-container"
  #   account: "my-account"
  #   prefix: "bleepstore/"
  #   connection_string: ""            # alternative to account-based auth
  #   use_managed_identity: false

# observability:
#   metrics: true        # Prometheus /metrics endpoint
#   health_check: true   # /healthz and /readyz endpoints

# Cluster configuration (only used when metadata.engine = "raft")
# cluster:
#   node_id: "node-1"
#   bind_addr: "0.0.0.0:9001"
#   advertise_addr: "10.0.1.1:9001"
#   data_dir: "./data/raft"
#   peers:
#     - id: "node-2"
#       addr: "10.0.1.2:9001"
#     - id: "node-3"
#       addr: "10.0.1.3:9001"
#   election_timeout_ms: 1000
#   heartbeat_interval_ms: 150
#   snapshot_interval: 10000
